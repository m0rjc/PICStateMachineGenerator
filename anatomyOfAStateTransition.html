<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Sep 29, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>PIC State Machine Generator - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20110929" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                State machine generator for PIC Microcontrollers
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2011-09-29</span>
                  &nbsp;| <span id="projectVersion">Version: 0.0.1-SNAPSHOT</span>
                      </div>
            <div class="xright">        
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Project Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
            <strong>Anatomy of a State Transition</strong>
          </li>
                  <li class="none">
                          <a href="inputFileFormat.html" title="Input File Format">Input File Format</a>
            </li>
          </ul>
                       <h5>Maven Reports</h5>
                  <ul>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                          <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>The Anatomy of a State Transition<a name="The_Anatomy_of_a_State_Transition"></a></h2><p>This document describes the behaviour of the generated state machine. It helps to explain what happens to the parts of a Node and Transition in the state model.</p><p>Each State Transition as carried out in response to the &quot;step&quot; method. The &quot;step&quot; method will be generated with the name of the state model. For example a model called &quot;gps&quot; will have a step method &quot;gpsStep&quot;. The calling procedure is to set up the input variable then call this method.</p><p>Considering the anatomy of a Node:</p><img src="images/NodeAndTransitionModel.png" alt="Model of a node and its transitions" /><p>On calling the Step method:</p><ul><li>The Step method will &quot;GOTO&quot; the current Node, pointed to by the Node Pointer.</li><li>The Node will scan through its transitions in the order defined, looking for a match that satisfies both the preconditions for the transition and any entry conditions for the target node.<ul><li>If satisfied then any transition commands will be executed followed by any entry commands for the target node.</li><li>All Nodes will be generated such that at least one transition will match. The fallback transition resets the state machine to its Initial State. This is in keeping with a system designed to parse input data.</li></ul></li><li>The node pointer is then set to point to the target node and control is returned to the calling program.</li></ul></div><div class="section"><h2>Skipping Node Entry Commands<a name="Skipping_Node_Entry_Commands"></a></h2><p>Transitions can be set to skip the entry commands associated with the target node. This feature is used to create the number parsing state machines. For example a state machine that reads data into an array will set the array index to zero when first entered. By allowing a &quot;transition to self&quot; that does not process that reset, it is possible to read the array without needing an additional state for subsequent bytes.</p></div><div class="section"><h2>Subroutines<a name="Subroutines"></a></h2><p>Subroutines are implemented as Commands in the above model. This results in subroutines acting as interruptions to normal transitions. A subroutine may be inserted in a transition or placed as an entry command in a node.</p><p>The state engine supports a single stack level. Attempts to go deeper overwrite the stack. Attempts to return when not in a subroutine will likely cause a crash or unexpected behaviour.</p><p>The Enter Subroutine command stores the location of the next instruction on the stack. It then renders a &quot;Go to Node&quot; command to switch to the subroutine as if it was the next state.</p><p>The Return from Subroutine command branches to the instruction located on the stack. This will cause the transition that entered the subroutine to continue. Note that transitions always render all preconditions before rendering commands. The means that it is not possible to insert conditions after the subroutine returns before the target node is entered.</p><!-- If we ever need to then we could consider a form of "immediate node" that renders its switching --><!-- code as a shared entry method. --></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                    2011
                      This is a personal project, currently not associated with any organisation..
            All Rights Reserved.      
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
